// The pluginManagement block must be at the top of the file.
pluginManagement {
    repositories {
        google()
        mavenCentral()
        gradlePluginPortal()
    }
}

dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()
        mavenCentral()
    }
}

rootProject.name = "android"
include(":app")

// The dynamic project inclusion logic should come after the management blocks.
def capacitorProjects = new File(settingsDir, "../node_modules/@capacitor").listFiles({ f -> f.isDirectory() } as FileFilter)
capacitorProjects.each { project ->
    include(":" + project.name)
    project(":${project.name}").projectDir = project
}

def capacitorCommunityProjects = new File(settingsDir, "../node_modules/@capacitor-community").listFiles({ f -> f.isDirectory() } as FileFilter)
capacitorCommunityProjects.each { project ->
    def projectName = "capacitor-community-" + project.name
    include(":" + projectName)
    project(":${projectName}").projectDir = project
}

include(":capacitor-cordova-android-plugins")
project(":capacitor-cordova-android-plugins").projectDir = new File(settingsDir, "capacitor-cordova-android-plugins")
