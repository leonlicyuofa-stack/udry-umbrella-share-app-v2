(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7203],{4575:function(e,t,r){Promise.resolve().then(r.bind(r,1675))},645:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(843).Z)("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]])},9580:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(843).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8790:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(843).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},7252:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.356.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(843).Z)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])},8792:function(e,t,r){"use strict";r.d(t,{default:function(){return i.a}});var n=r(5250),i=r.n(n)},1675:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var n,i=r(7437),a=r(2265),s=r(6210),l=r(7907),o=r(5671),c=r(575),d=r(2782),u=r(2647),f=r(9580),m=r(9724),p=r(8790),x=r(645),h=r(7252),y=r(8792),v=r(3790),g=r(6862),b=r(9069),j="https://js.stripe.com/v3",w=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,N=function(){for(var e=document.querySelectorAll('script[src^="'.concat(j,'"]')),t=0;t<e.length;t++){var r=e[t];if(w.test(r.src))return r}return null},_=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(j).concat(t);var n=document.head||document.body;if(!n)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},k=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"4.6.0",startTime:t})},C=null,S=null,Z=null,E=function(e,t,r){if(null===e)return null;var n=e.apply(void 0,t);return k(n,r),n},R=!1,P=function(){return n||(n=(null!==C?C:(C=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document){e(null);return}if(window.Stripe,window.Stripe){e(window.Stripe);return}try{var r,n=N();n?n&&null!==Z&&null!==S&&(n.removeEventListener("load",Z),n.removeEventListener("error",S),null===(r=n.parentNode)||void 0===r||r.removeChild(n),n=_(null)):n=_(null),Z=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},S=function(){t(Error("Failed to load Stripe.js"))},n.addEventListener("load",Z),n.addEventListener("error",S)}catch(e){t(e);return}})).catch(function(e){return C=null,Promise.reject(e)})).catch(function(e){return n=null,Promise.reject(e)}))};Promise.resolve().then(function(){return P()}).catch(function(e){R||console.warn(e)});var F=r(3277),z=r(1776);let W=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];R=!0;var n=Date.now();return P().then(function(e){return E(e,t,n)})}("pk_test_51RuUEyFSrsPDp5bNMv6Q2iDlLTix5dnBQLKcTKXTw06ZuQPg8kiwFqbOztasnrEIBQ1cgzZkvTXJmY33vuk2IQxH00vcip4BoR");function I(){let{user:e,isReady:t,firebaseServices:r}=(0,s.useAuth)(),{translate:n}=(0,v.useLanguage)(),{toast:j}=(0,g.pm)(),w=(0,l.useRouter)(),[N,_]=(0,a.useState)("50"),[k,C]=(0,a.useState)(""),[S,Z]=(0,a.useState)(null),[E,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&!e&&w.replace("/auth/signin?redirect=/deposit")},[e,t,w]);let P=[{id:"stripe",nameKey:"payment_method_credit_card"},{id:"alipay",nameKey:"payment_method_alipay"},{id:"payme",nameKey:"payment_method_payme"}].map(e=>({...e,name:n(e.nameKey)}));if(!t)return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-10rem)]",children:[(0,i.jsx)(f.Z,{className:"h-12 w-12 animate-spin text-primary"}),(0,i.jsx)("p",{className:"mt-4 text-muted-foreground",children:n("deposit_loading_account")})]});if(!e)return(0,i.jsx)("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-10rem)] text-center p-4",children:(0,i.jsxs)(o.Zb,{className:"w-full max-w-md shadow-lg",children:[(0,i.jsx)(o.Ol,{children:(0,i.jsxs)(o.ll,{className:"text-destructive flex items-center justify-center",children:[(0,i.jsx)(m.Z,{className:"mr-2 h-6 w-6"})," ",n("access_denied")]})}),(0,i.jsxs)(o.aY,{children:[(0,i.jsx)("p",{children:n("deposit_login_required")}),(0,i.jsx)(c.z,{asChild:!0,className:"mt-4",children:(0,i.jsxs)(y.default,{href:"/auth/signin?redirect=/deposit",className:"flex items-center",children:[(0,i.jsx)(p.Z,{className:"mr-2 h-4 w-4"})," ",n("login")]})})]})]})});let I=async(e,t)=>{if(!S||!(null==r?void 0:r.functions)){j({variant:"destructive",title:"Error",description:"Payment services are not available."});return}R(!0);try{if("stripe"===S){let n=(0,z.V1)(r.functions,"createStripeCheckoutSession"),i=window.location.origin,a=(await n({amount:e,paymentType:t,origin:i})).data;if(!a.success||!a.id)throw Error(a.message||"Failed to create Stripe session.");let s=a.id,l=await W;if(!l)throw Error("Stripe.js has not loaded yet.");let{error:o}=await l.redirectToCheckout({sessionId:s});if(o)throw Error(o.message)}else j({title:"Payment Method Not Implemented",description:"The selected method '".concat(S,"' is not yet fully integrated.")}),R(!1)}catch(e){j({variant:"destructive",title:"Payment Error",description:e.message}),R(!1)}};return e.deposit&&e.deposit>=100?(0,i.jsx)("div",{className:"container mx-auto py-8 px-4 max-w-2xl",children:(0,i.jsxs)(o.Zb,{className:"shadow-xl",children:[(0,i.jsxs)(o.Ol,{children:[(0,i.jsxs)(o.ll,{className:"text-3xl font-bold text-primary flex items-center",children:[(0,i.jsx)(h.Z,{className:"mr-3 h-8 w-8"}),n("add_balance_title")]}),(0,i.jsx)(o.SZ,{children:n("add_balance_desc")})]}),(0,i.jsxs)(o.aY,{className:"space-y-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u._,{className:"text-lg font-semibold",children:n("add_balance_amount_label")}),(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-2",children:["25","50","100","custom"].map(e=>(0,i.jsx)(c.z,{variant:N===e?"default":"outline",onClick:()=>_(e),className:"h-14 text-lg",disabled:E,children:"custom"===e?n("add_balance_custom_amount"):"HK$".concat(e)},e))}),"custom"===N&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)(u._,{htmlFor:"custom-amount-input",children:n("add_balance_enter_custom_amount")}),(0,i.jsx)(d.I,{id:"custom-amount-input",type:"number",placeholder:"e.g., 30",value:k,onChange:e=>C(e.target.value),className:"mt-1 h-12 text-lg",min:"1",disabled:E})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:n("deposit_payment_method_label")}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:P.map(e=>{let t="payme"===e.id||"alipay"===e.id;return(0,i.jsxs)(c.z,{variant:S===e.id?"default":"outline",className:"h-auto py-4 flex items-center justify-center gap-2",onClick:()=>Z(e.id),disabled:E||t,children:[(0,i.jsx)("span",{children:e.name}),t&&(0,i.jsx)(F.C,{variant:"secondary",children:"Available Soon"})]},e.id)})})]})]}),(0,i.jsx)(o.eW,{children:(0,i.jsxs)(c.z,{className:"w-full text-lg py-6 bg-accent hover:bg-accent/90 text-accent-foreground",onClick:()=>{let e=parseFloat("custom"===N?k:N);if(isNaN(e)||e<=0){j({title:"Invalid Amount",description:"Please enter a valid positive amount.",variant:"destructive"});return}I(e,"balance")},disabled:!S||E||"custom"===N&&(!k||0>=parseFloat(k)),children:[E&&(0,i.jsx)(f.Z,{className:"mr-2 h-5 w-5 animate-spin"}),n("add_balance_proceed_button")]})})]})}):(0,i.jsx)("div",{className:"container mx-auto py-8 px-4 max-w-2xl",children:(0,i.jsxs)(o.Zb,{className:"shadow-xl",children:[(0,i.jsxs)(o.Ol,{children:[(0,i.jsxs)(o.ll,{className:"text-3xl font-bold text-primary flex items-center",children:[(0,i.jsx)(x.Z,{className:"mr-3 h-8 w-8"}),n("deposit_title_one_time")]}),(0,i.jsx)(o.SZ,{children:n("deposit_desc_one_time")})]}),(0,i.jsxs)(o.aY,{className:"space-y-6",children:[(0,i.jsxs)(b.bZ,{children:[(0,i.jsx)(m.Z,{className:"h-4 w-4"}),(0,i.jsx)(b.Cd,{children:n("deposit_alert_title")}),(0,i.jsx)(b.X,{children:n("deposit_alert_desc")})]}),(0,i.jsxs)("div",{className:"text-center p-6 bg-secondary/50 rounded-md",children:[(0,i.jsx)(u._,{className:"text-lg text-muted-foreground",children:n("deposit_amount_label_fixed")}),(0,i.jsx)("p",{className:"text-5xl font-bold text-primary",children:"HK$100.00"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:n("deposit_payment_method_label")}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:P.map(e=>{let t="payme"===e.id||"alipay"===e.id;return(0,i.jsxs)(c.z,{variant:S===e.id?"default":"outline",className:"h-auto py-4 flex items-center justify-center gap-2",onClick:()=>Z(e.id),disabled:E||t,children:[(0,i.jsx)("span",{children:e.name}),t&&(0,i.jsx)(F.C,{variant:"secondary",children:"Available Soon"})]},e.id)})})]})]}),(0,i.jsx)(o.eW,{children:(0,i.jsxs)(c.z,{className:"w-full text-lg py-6 bg-accent hover:bg-accent/90 text-accent-foreground",onClick:()=>I(100,"deposit"),disabled:!S||E,children:[E&&(0,i.jsx)(f.Z,{className:"mr-2 h-5 w-5 animate-spin"}),n("deposit_proceed_button")]})})]})})}},3277:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var n=r(7437);r(2265);var i=r(9769),a=r(2169);let s=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...i}=e;return(0,n.jsx)("div",{className:(0,a.cn)(s({variant:r}),t),...i})}},575:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return c}});var n=r(7437),i=r(2265),a=r(9143),s=r(9769),l=r(2169);let o=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:i,size:s,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(o({variant:i,size:s,className:r})),ref:t,...d})});c.displayName="Button"},5671:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return s},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var n=r(7437),i=r(2265),a=r(2169);let s=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...i})});s.displayName="Card";let l=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...i})});l.displayName="CardHeader";let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...i})});o.displayName="CardTitle";let c=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...i})});c.displayName="CardDescription";let d=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...i})});d.displayName="CardContent";let u=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...i})});u.displayName="CardFooter"},2782:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var n=r(7437),i=r(2265),a=r(2169);let s=i.forwardRef((e,t)=>{let{className:r,type:i,...s}=e;return(0,n.jsx)("input",{type:i,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});s.displayName="Input"},2647:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var n=r(7437),i=r(2265),a=r(4602),s=r(9769),l=r(2169);let o=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,l.cn)(o(),r),...i})});c.displayName=a.f.displayName},1266:function(e,t,r){"use strict";r.d(t,{F:function(){return a},e:function(){return s}});var n=r(2265);function i(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let r=!1,n=e.map(e=>{let n=i(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():i(e[t],null)}}}}function s(...e){return n.useCallback(a(...e),e)}},4602:function(e,t,r){"use strict";r.d(t,{f:function(){return l}});var n=r(2265),i=r(9586),a=r(7437),s=n.forwardRef((e,t)=>(0,a.jsx)(i.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var l=s},9586:function(e,t,r){"use strict";r.d(t,{WV:function(){return l},jH:function(){return o}});var n=r(2265),i=r(4887),a=r(9143),s=r(7437),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,a.Z8)(`Primitive.${t}`),i=n.forwardRef((e,n)=>{let{asChild:i,...a}=e,l=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(l,{...a,ref:n})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function o(e,t){e&&i.flushSync(()=>e.dispatchEvent(t))}},9143:function(e,t,r){"use strict";r.d(t,{Z8:function(){return s},g7:function(){return l},sA:function(){return c}});var n=r(2265),i=r(1266),a=r(7437);function s(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...a}=e;if(n.isValidElement(r)){let e,s;let l=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?r.props.ref:r.props.ref||r.ref,o=function(e,t){let r={...t};for(let n in t){let i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...e)=>{let t=a(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...a}:"className"===n&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==n.Fragment&&(o.ref=t?(0,i.F)(t,l):l),n.cloneElement(r,o)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:i,...s}=e,l=n.Children.toArray(i),o=l.find(d);if(o){let e=o.props.children,i=l.map(t=>t!==o?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...s,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,i):null})}return(0,a.jsx)(t,{...s,ref:r,children:i})});return r.displayName=`${e}.Slot`,r}var l=s("Slot"),o=Symbol("radix.slottable");function c(e){let t=({children:e})=>(0,a.jsx)(a.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=o,t}function d(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}}},function(e){e.O(0,[4358,139,7192,5596,5250,7992,6210,2971,8069,1744],function(){return e(e.s=4575)}),_N_E=e.O()}]);