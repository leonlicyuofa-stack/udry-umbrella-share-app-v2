
// Top-level build file where you can add configuration options common to all sub-projects/modules.
buildscript {
    // Defines the central versions for key build tools.
    ext {
        // These versions are sourced from your project's `gradle/libs.versions.toml` file.
        androidGradlePluginVersion = '8.4.1'
        kotlinVersion = '1.9.24'
    }
    // Defines the repositories for the build script's own dependencies (the plugins).
    repositories {
        google()
        mavenCentral()
    }
    // Defines the actual plugin dependencies for the build script.
    dependencies {
        classpath "com.android.tools.build:gradle:$androidGradlePluginVersion"
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion"
        // NOTE: Do not add other dependencies here. App dependencies go in app/build.gradle.
    }
}

// The 'allprojects' block applies the enclosed configuration to every module in the project.
allprojects {
    // This is the correct place to apply the Capacitor plugin logic.
    // It ensures that any project (like ':app') gets the necessary Capacitor configurations.
    apply from: "../node_modules/@capacitor/android/capacitor/build.gradle"

    // DO NOT ADD a repositories {} block here. It is managed by settings.gradle.
    // My previous error was adding a repositories block here, which is forbidden.
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
