<!DOCTYPE html>
<html>
<head>
    <title>Redirecting...</title>
    <meta http-equiv="refresh" content="0; url=udry://home">
    <script type="text/javascript">
        window.onload = function() {
            // This is the custom URL scheme that will open your app
            var appURL = "udry://home";
            // This is the URL for the Apple App Store
            var appStoreURL = "https://apps.apple.com/us/app/udry/id6751819661"; // Your live App Store URL
            // This is the URL for the Google Play Store
            var playStoreURL = "PLAY_STORE_URL"; // Placeholder for your Google Play Store URL

            var userAgent = navigator.userAgent || navigator.vendor || window.opera;
            var isIOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;
            var isAndroid = /android/i.test(userAgent);

            // Attempt to open the app
            window.location.replace(appURL);

            // Set a timeout to redirect to the store if the app doesn't open
            setTimeout(function() {
                if (isIOS) {
                    window.location.href = appStoreURL;
                } else if (isAndroid) {
                    // Android redirection is handled by the intent filter in the manifest
                    // but we can add a fallback if needed. For now, we will focus on iOS.
                    // window.location.href = playStoreURL;
                } else {
                    // Fallback for desktop browsers
                    window.location.href = appStoreURL;
                }
            }, 2000); // 2 second delay to allow the app to try opening
        };
    </script>
</head>
<body>
    <p>If you are not redirected automatically, <a href="udry://home">click here to open the app</a> or visit the <a href="https://apps.apple.com/us/app/udry/id6751819661">App Store</a>.</p>
</body>
</html>